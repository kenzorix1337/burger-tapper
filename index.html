<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–ø–∞–ª–∫–∞</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1a1a2e;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        h2 {
            margin-bottom: 20px;
            color: white;
        }
        .button {
            background-color: #ff9800;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
            width: 80%;
            max-width: 300px;
        }
        #burger {
            width: 50vw;
            height: 50vw;
            max-width: 400px;
            max-height: 400px;
            background-image: url('whoppe.png');
            background-size: cover;
            margin: 30px;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        #burger:active {
            transform: scale(0.95);
        }
        #stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 600px;
            margin-top: 20px;
            color: white;
            font-weight: bold;
        }
        #energy-bar-container {
            width: 100%;
            max-width: 600px;
            margin-top: 20px;
            text-align: center;
            position: relative;
        }
        #energy-bar {
            width: 100%;
            background-color: #333;
            border-radius: 20px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
            height: 40px;
        }
        #energy {
            height: 100%;
            background-color: #76c7c0;
            width: 100%;
            border-radius: 20px;
            position: absolute;
            left: 0;
            top: 0;
            transition: width 0.3s ease;
        }
        #energy-text {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        #max-energy-text {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        .upgrades {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        .upgrade-btn {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 200px;
            margin-bottom: 10px;
        }
        .nav-panel {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 600px;
            background-color: #333;
            position: fixed;
            bottom: 0;
            left: 0;
        }
        .nav-item {
            color: white;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            flex: 1;
            text-align: center;
        }
        .nav-item.active {
            background-color: #ff9800;
        }
        .leaderboard {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
            width: 100%;
            max-width: 600px;
        }
        .player {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 10px;
            background-color: #2d2d44;
            border-radius: 5px;
            margin: 5px 0;
        }
        .player-icon {
            background-color: #ff9800;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            color: white;
            margin-right: 10px;
        }
        .player-name {
            flex: 1;
            display: flex;
            align-items: center;
        }
        .player-clicks {
            color: #ffeb3b;
        }
        .icon {
            margin-right: 5px;
        }
        #score .icon {
            color: gold;
        }
        #level .icon {
            color: #ffeb3b;
        }
        #energy-bar .icon {
            color: #76c7c0;
        }
        .hitmarker {
            position: absolute;
            font-size: 30px;
            color: #ff9800;
            animation: hitMarkerAnimation 0.5s ease-out;
        }
        @keyframes hitMarkerAnimation {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-30px) scale(0.5); }
        }
        /* –ö–Ω–æ–ø–∫–∞ –∑–∞–¥–∞–Ω–∏—è —Å –ø–æ–¥–ø–∏—Å–∫–æ–π */
        .quest-btn {
            background-color: #0077b6;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 18px;
            text-align: center;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–∞—è —á–∞—Å—Ç—å –∏–≥—Ä—ã -->
    <div id="game">
        <div id="stats">
            <div id="score"><span class="icon">üí∞</span> –ö–ª–∏–∫–∏: 0</div>
            <div id="level"><span class="icon">üèÜ</span> –£—Ä–æ–≤–µ–Ω—å: 1</div>
        </div>
        <div id="burger"></div>
        <div id="energy-bar-container">
            <div id="energy-bar">
                <div id="energy"></div>
                <div id="energy-text">–≠–Ω–µ—Ä–≥–∏—è: 3000</div>
                <div id="max-energy-text">–ú–∞–∫—Å: 3000</div>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ -->
    <div id="upgrades" style="display: none;">
        <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
        <div class="upgrades">
            <button class="upgrade-btn" id="upgrade-energy">‚ö° –ú–∞–∫—Å –≠–Ω–µ—Ä–≥–∏—è - 100</button>
            <button class="upgrade-btn" id="upgrade-tap">üëÜ –ö–ª–∏–∫–∏ –∑–∞ –¢–∞–ø - 50</button>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ —Å —Ç–æ–ø-–∏–≥—Ä–æ–∫–∞–º–∏ -->
    <div id="leaderboard" style="display: none;">
        <h2>–¢–æ–ø 100 –ò–≥—Ä–æ–∫–æ–≤</h2>
        <div class="leaderboard" id="leaderboard-list">
            <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏ -->
    <div id="quests" style="display: none;">
        <h2>–ó–∞–¥–∞–Ω–∏—è</h2>
        <div class="quest-btn" id="subscribe-quest">
            –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram –∫–∞–Ω–∞–ª
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <div class="nav-panel">
        <div class="nav-item active" id="home">üè†</div>
        <div class="nav-item" id="upgrade">üöÄ</div>
        <div class="nav-item" id="leaderboard-tab">üèÜ</div>
        <div class="nav-item" id="quests-tab">üìú</div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

    <script>
        // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        var firebaseConfig = {
            apiKey: "AIzaSyDndBcV29tFvBX-RGzCIAUVEnVy8G5GdJc",
            authDomain: "whopper-a32f7.firebaseapp.com",
            projectId: "whopper-a32f7",
            storageBucket: "whopper-a32f7.appspot.com",
            messagingSenderId: "701387895307",
            appId: "1:701387895307:web:cc656083f5f0ed1c590d0e",
            measurementId: "G-PQ6JZEZMEP"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let clicks = 0;
        let level = 1;
        let energy = 3000;
        let maxEnergy = 3000;
        let clicksPerTap = 1;
        let lastEnergyUpdate = Date.now();

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞ –≤ Firebase
        function updatePlayerData() {
            const user = firebase.auth().currentUser;
            if (user) {
                db.collection('players').doc(user.uid).set({
                    clicks: clicks,
                    level: level,
                    energy: energy,
                    maxEnergy: maxEnergy,
                    clicksPerTap: clicksPerTap,
                    lastEnergyUpdate: lastEnergyUpdate
                }, { merge: true });
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞ –∏–∑ Firebase
        function loadPlayerData() {
            const user = firebase.auth().currentUser;
            if (user) {
                db.collection('players').doc(user.uid).get().then((doc) => {
                    if (doc.exists) {
                        const data = doc.data();
                        clicks = data.clicks || 0;
                        level = data.level || 1;
                        energy = data.energy || 3000;
                        maxEnergy = data.maxEnergy || 3000;
                        clicksPerTap = data.clicksPerTap || 1;
                        lastEnergyUpdate = data.lastEnergyUpdate || Date.now();
                        updateUI();
                    }
                });
            }
        }

        // –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google
        function googleSignIn() {
            var provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider).then((result) => {
                loadPlayerData();
            });
        }

        // –í—Ö–æ–¥ –∞–Ω–æ–Ω–∏–º–Ω—ã–π
        firebase.auth().signInAnonymously().then(() => {
            loadPlayerData();
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('score').innerHTML = `<span class="icon">üí∞</span> –ö–ª–∏–∫–∏: ${clicks}`;
            document.getElementById('level').innerHTML = `<span class="icon">üèÜ</span> –£—Ä–æ–≤–µ–Ω—å: ${level}`;
            document.getElementById('energy-text').textContent = `–≠–Ω–µ—Ä–≥–∏—è: ${energy}`;
            document.getElementById('max-energy-text').textContent = `–ú–∞–∫—Å: ${maxEnergy}`;
            document.getElementById('energy').style.width = `${(energy / maxEnergy) * 100}%`;
        }

        // –ö–ª–∏–∫ –ø–æ –±—É—Ä–≥–µ—Ä—É
        document.getElementById('burger').addEventListener('click', () => {
            if (energy >= 10) {
                clicks += clicksPerTap;
                energy -= 10;
                updateUI();
                spawnHitMarker();
                updatePlayerData();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!");
            }
        });

        // –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ö–∏—Ç–º–∞—Ä–∫–µ—Ä–∞
        function spawnHitMarker() {
            const hitmarker = document.createElement('div');
            hitmarker.className = 'hitmarker';
            hitmarker.textContent = `+${clicksPerTap}`;
            hitmarker.style.left = `${Math.random() * 80 + 10}%`;
            hitmarker.style.top = `${Math.random() * 80 + 10}%`;
            document.body.appendChild(hitmarker);
            setTimeout(() => hitmarker.remove(), 500);
        }

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫—É–Ω–¥—É
        setInterval(() => {
            const now = Date.now();
            const elapsedSeconds = Math.floor((now - lastEnergyUpdate) / 1000);
            const recoveredEnergy = elapsedSeconds * 10; // 10 —ç–Ω–µ—Ä–≥–∏–∏ –≤ —Å–µ–∫—É–Ω–¥—É
            if (energy < maxEnergy) {
                energy = Math.min(energy + recoveredEnergy, maxEnergy);
                lastEnergyUpdate = now;
                updateUI();
                updatePlayerData();
            }
        }, 1000);

        // –£–ª—É—á—à–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
        document.getElementById('upgrade-energy').addEventListener('click', () => {
            if (clicks >= 100) {
                clicks -= 100;
                maxEnergy += 500;
                updateUI();
                updatePlayerData();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤!");
            }
        });

        // –£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –∑–∞ —Ç–∞–ø
        document.getElementById('upgrade-tap').addEventListener('click', () => {
            if (clicks >= 50) {
                clicks -= 50;
                clicksPerTap += 1;
                updateUI();
                updatePlayerData();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤!");
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        document.getElementById('home').addEventListener('click', () => {
            showTab('game', 'home');
        });
        document.getElementById('upgrade').addEventListener('click', () => {
            showTab('upgrades', 'upgrade');
        });
        document.getElementById('leaderboard-tab').addEventListener('click', () => {
            showTab('leaderboard', 'leaderboard-tab');
            loadLeaderboard();
        });
        document.getElementById('quests-tab').addEventListener('click', () => {
            showTab('quests', 'quests-tab');
        });

        function showTab(tabId, navId) {
            document.getElementById('game').style.display = 'none';
            document.getElementById('upgrades').style.display = 'none';
            document.getElementById('leaderboard').style.display = 'none';
            document.getElementById('quests').style.display = 'none';
            document.getElementById(tabId).style.display = 'block';

            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(navId).classList.add('active');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤
        function loadLeaderboard() {
            const leaderboardList = document.getElementById('leaderboard-list');
            leaderboardList.innerHTML = '';

            db.collection('players')
                .orderBy('clicks', 'desc')
                .limit(100)
                .get()
                .then((querySnapshot) => {
                    querySnapshot.forEach((doc) => {
                        const player = doc.data();
                        const playerDiv = document.createElement('div');
                        playerDiv.className = 'player';
                        playerDiv.innerHTML = `
                            <div class="player-icon">${player.name ? player.name.charAt(0) : '?'}</div>
                            <div class="player-name">${player.name || '–ê–Ω–æ–Ω–∏–º'}</div>
                            <div class="player-clicks">${player.clicks} –∫–ª–∏–∫–æ–≤</div>
                        `;
                        leaderboardList.appendChild(playerDiv);
                    });
                });
        }

        // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
        document.getElementById('subscribe-quest').addEventListener('click', () => {
            window.open('https://t.me/your_channel', '_blank');
        });

    </script>
</body>
</html>
